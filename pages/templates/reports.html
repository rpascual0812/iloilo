<link href="./css/datatables/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
<section class="content">
	<div class="row">
		<div class="col-xs-12">
			<div class="box">
                <div class="box-header">
                    <h3 class="box-title">Orders</h3>
                </div>
                <div class="box-body table-responsive">
                	<!-- Date and time range -->
                    <div class="form-group">
                    	<div>
                        	<label>Date range button:</label>
                    	</div>
                    	<div style="margin-bottom: 50px;">
	                        <div class="input-group" style="float: left;">
	                            <button class="btn btn-default pull-right" id="daterange-btn">
	                                <i class="fa fa-calendar"></i> Date range picker
	                                <i class="fa fa-caret-down"></i>
	                            </button>
	                            <div id="reportrange" style="display: none;">
	                            	<span></span>
	                            </div>                    
	                        </div>
	                        <div style="float: left; margin-left: 5px;">
	                        	<button class="btn btn-info" onclick="get_orders()">SEARCH</button>
	                        </div>
	                    </div>
                    </div><!-- /.form group -->

                    <table id="example2" class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Customer Name</th>
                                <th>Mobile</th>
                                <th>Landline</th>
                                <th>Location</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Option</th>
                            </tr>
                        </thead>
                        <tbody id="tbody-orders">
                            <tr>
                                <td colspan="7" style="text-align: center;">&nbsp;</td>
                            </tr>
                        </tbody>
                    </table>
                </div><!-- /.box-body -->
            </div><!-- /.box -->
		</div>
	</div>
</div>

<script type="text/javascript">
    $(function() {
    	$('#daterange-btn').daterangepicker(
                {
                    ranges: {
                        'Today': [moment(), moment()],
                        'Tomorrow': [moment().add('days', 1), moment().add('days', 1)],
                        'Next 7 Days': [moment(), moment().add('days', 6)],
                        'Next 30 Days': [moment(), moment().add('days', 29)],
                        'This Month': [moment().startOf('month'), moment().endOf('month')],
                        'Yesterday': [moment().subtract('days', 1), moment().subtract('days', 1)],
                        'Last 7 Days': [moment().subtract('days', 6), moment()],
                        'Last 30 Days': [moment().subtract('days', 29), moment()],                        
                        'Last Month': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
                    },
                    startDate: moment().subtract('days', 29),
                    endDate: moment()
                },
        function(start, end) {
            $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
        });
    });

    function get_orders(){
    	var date = $('#reportrange span').html();
    	if(date == ""){
            
    	}
    	else {
    		$.post('./functions/orders/get_report.php', { date : date }, function(data){
	        	$('#tbody-orders').empty();
	            if(data.status == true){
	                $.each(data.data, function(i){
	                	$('#tbody-orders').append('\
	                								<tr>\
	                									<td style="vertical-align: middle;">'+this.customername+'</td>\
	                									<td style="vertical-align: middle; width: 130px;">'+this.mobilephone+'</td>\
	                									<td style="vertical-align: middle; width: 90px;">'+this.landline+'</td>\
	                									<td style="vertical-align: middle;">'+this.loc+'</td>\
	                									<td style="vertical-align: middle; width: 150px;">'+this.datefrom+"<br />"
	                										 +this.dateto+'</td>\
	                									<td style="vertical-align: middle; width: 80px;">'+this.stat+'</td>\
	                									<td style="vertical-align: middle; text-align: center; width: 110px;">DELETE | EDIT</td>\
	                								</tr>\
	                							');
	                });
	            }
	            else {
	                $('#tbody-orders').append('<tr>\
					                                <td colspan="7" style="text-align: center;">No orders found</td>\
					                            </tr>');
	            }
	        });
    	}	        
    }
</script>

<!--
<script src="./js/plugins/datatables/jquery.dataTables.js" type="text/javascript"></script>
<script src="./js/plugins/datatables/dataTables.bootstrap.js" type="text/javascript"></script>

<script type="text/javascript">
    $(function() {
        $('#example2').dataTable({
            "bPaginate": true,
            "bLengthChange": false,
            "bFilter": false,
            "bSort": true,
            "bInfo": true,
            "bAutoWidth": false
        });
    });
</script>
-->